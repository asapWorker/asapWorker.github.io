{"ast":null,"code":"import _classCallCheck from\"/home/ralina/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/course_project_copy/asapWorker.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ralina/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/course_project_copy/asapWorker.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/ralina/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/course_project_copy/asapWorker.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/ralina/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/course_project_copy/asapWorker.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Fragment,useRef}from'react';import{createSmartappDebugger,createAssistant}from\"@sberdevices/assistant-client\";import'./App.css';import{Table}from\"./components/table/Table\";import{Card}from\"./components/card/Card\";import{Timer}from\"./components/timer/Timer\";import{Result}from\"./components/result/Result\";import{Level}from\"./components/level/Level\";import{Container}from\"./components/container/Container\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var countOfPictures=25;var initializeAssistant=function initializeAssistant(getState/*: any*/){if(process.env.NODE_ENV===\"development\"){var _eyJhbGciOiJSUzI1NiIs;return createSmartappDebugger({token:(_eyJhbGciOiJSUzI1NiIs=\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZTFmNTQxODM0NzEwNjkyNzAzM2QwYTQ0ODFmMTNkNTJiMTA1N2NhMWNkY2I0OTg0ZGNiMWQxZjQzMzdhMzYyNTM5YmU5MjcwMDQyNjI5OCIsImF1ZCI6IlZQUyIsImV4cCI6MTYyMzAxMDc1MSwiaWF0IjoxNjIyOTI0MzQxLCJpc3MiOiJLRVlNQVNURVIiLCJ0eXBlIjoiQmVhcmVyIiwianRpIjoiYjM4ZjEyM2YtY2QwNi00YzZmLWFjM2EtNDMxODcyNjlhOTdkIiwic2lkIjoiZjk5YzlkMTMtNjNhZi00ZTBhLWEyNjYtMTg2YTQ3NGQwYTRkIn0.oJrloeI49IiijcWNHycouraesKXfZ3nUqZEnSmvyFz4dJ-RzEb8oTbPDJbNcaxQRlK85--0h56SkmggSpceGGP3X5uWL-zmdNmoXkaVP50SI58YhfM07Ma1cU4-qV0SATwdVemtwrvX8yDH0inqlGXOoI49EissB3Ma2Q4gK65nDiStAspF2bZTk0705M_skE_OYs2ZZ2HwsPW4I7jHzDr1WQGai5eBgvrsade73zMJrWPhpxZY1rRXWQYxLM2v0fG3YmGdW4ONElN71iMlXothH8rBSWvbW3OTlE7zjcxr6OqhGobGfNdVS_23RTIhp0CRMje3L-9I0KisUjL7uNlX7-IImhvR0gaPamInKQVRzzlvd2A7LDnyVZ6zqpHsCZ7dJrzX-kLElAKAjrkCadFeNhyL5NdYTub3SvDSrMA_5BvP9mlfqkfc0K1XBrA5Y4AjW_2JKT0LSaPu5L00VEK_qdZ98LE8x__Kzy1n19LyZ-ThhkpZJ8nJu80_Q60yHzwWfzXQ_YX-zGRuCW5ow668m8wPi2nb1GI70BXiUVTSjXfbMH2BMWzKYUnHJU0INF-KOc4o6u-Ib5YLKaERl9WClIkclINGSOoVtvgc3vi3Q0jtPr0Ko0YtrZpUY-w9cQigA-hSQ83b4q4RTzxtetoTUWNQ_4EiOTph-6SfDwpE\")!==null&&_eyJhbGciOiJSUzI1NiIs!==void 0?_eyJhbGciOiJSUzI1NiIs:\"\",initPhrase:'Запусти тренажер памяти',getState:getState});}return createAssistant({getState:getState});};export{initializeAssistant};var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.resultRef=/*#__PURE__*/React.createRef();_this.assistant=initializeAssistant(function(){return _this.getStateForAssistant();});_this.assistant.on(\"data\",function(event/*: any*/){console.log(\"assistant.on(data)\",event);var action=event.action;_this.dispatchAssistantAction(action);});_this.assistant.on(\"start\",function(event){console.log(\"assistant.on(start)\",event);});_this.state={cards:[],flag:0,status:'start',level:0,changeFlag:function changeFlag(value){this.setState(this.state={flag:this.state.flag+value});},startGame:function startGame(level){function random(from,till){return Math.floor(Math.random()*(till-from))+from;}function changeFlag(value){this.setState(this.state={flag:this.state.flag+value});}var countOfAnswers=random(4,7);var answer=random(0,countOfPictures);console.log(answer);console.log(countOfAnswers);var answersIndexes=new Set();var used=new Set([answer]);var cards=[];for(var i=0;i<countOfAnswers;i++){while(true){var ind=random(0,level);if(!answersIndexes.has(ind)){answersIndexes.add(ind);break;}}}this.setState(this.state={status:\"current\",flag:level-countOfAnswers,level:level,changeFlag:changeFlag});for(var _i=0;_i<level;_i++){var isAnswer='wrong';var value=0;if(countOfAnswers!==0&&answersIndexes.has(_i)){{countOfAnswers--;isAnswer='truth';value=answer;}}else{while(true){value=random(0,countOfPictures);if(!used.has(value)){used.add(value);break;}}}this[\"c\"+_i]=/*#__PURE__*/React.createRef();cards.push(/*#__PURE__*/_jsx(Card,{src:\"https://pictures-for-memory-game.s3.eu-north-1.amazonaws.com/\"+(value+1)+\".jpg\",index:_i+1,status:\"open\",answer:isAnswer,level:'level_'+level,changeParentFlag:changeFlag.bind(this),time:true,ref:this['c'+_i]},_i));}this.setState(this.state={cards:cards});},finishGame:function finishGame(){for(var i=0;i<this.state.level;i++){this['c'+i].current.makeResult();}this.resultRef.current.makeResult(this.state.flag,this.state.level);this.setState(this.state={status:\"finish\"});},restartGame:function restartGame(){this.setState(this.state={status:\"start\"});}};return _this;}_createClass(App,[{key:\"getStateForAssistant\",value:function getStateForAssistant(){console.log('getStateForAssistant: this.state:',this.state);var state={};return state;}},{key:\"dispatchAssistantAction\",value:function dispatchAssistantAction(action){console.log('dispatchAssistantAction',action);if(action){switch(action.type){case\"easy_level\":if(this.state.status===\"start\"){this.state.startGame.call(this,9);}return;case\"middle_level\":if(this.state.status===\"start\"){this.state.startGame.call(this,16);}return;case\"hard_level\":if(this.state.status===\"start\"){this.state.startGame.call(this,25);}return;case\"return_back\":if(this.state.status===\"finish\"){this.state.restartGame.call(this);}return;case\"check_answers\":if(this.state.status===\"current\"){this.state.finishGame.call(this);}case\"choose_num\":if(this.state.status===\"current\")this['c'+(action.num-1)].current.check();return;}}}},{key:\"render\",value:function render(){if(this.state.status===\"start\"){return/*#__PURE__*/_jsx(\"div\",{className:\"start_page\",children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Level,{num:1,name:\"легкий уровень\"}),/*#__PURE__*/_jsx(Level,{num:2,name:\"средний уровень\"}),/*#__PURE__*/_jsx(Level,{num:3,name:\"сложный уровень\"})]})});}else if(this.state.status===\"current\"||this.state.status===\"finish\"){return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Timer,{}),/*#__PURE__*/_jsx(Table,{children:this.state.cards}),/*#__PURE__*/_jsx(Result,{ref:this.resultRef})]});}}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/home/ralina/Рабочий стол/course_project_copy/asapWorker.github.io/src/App.js"],"names":["React","Fragment","useRef","createSmartappDebugger","createAssistant","Table","Card","Timer","Result","Level","Container","countOfPictures","initializeAssistant","getState","process","env","NODE_ENV","token","initPhrase","App","props","resultRef","createRef","assistant","getStateForAssistant","on","event","console","log","action","dispatchAssistantAction","state","cards","flag","status","level","changeFlag","value","setState","startGame","random","from","till","Math","floor","countOfAnswers","answer","answersIndexes","Set","used","i","ind","has","add","isAnswer","push","bind","finishGame","current","makeResult","restartGame","type","call","num","check","Component"],"mappings":"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","sourcesContent":["import React, {Fragment, useRef} from 'react'\n\nimport {\n    createSmartappDebugger,\n    createAssistant,\n} from \"@sberdevices/assistant-client\";\n\nimport './App.css'\nimport {Table} from \"./components/table/Table\";\nimport {Card} from \"./components/card/Card\";\nimport {Timer} from \"./components/timer/Timer\";\nimport {Result} from \"./components/result/Result\";\nimport {Level} from \"./components/level/Level\";\nimport {Container} from \"./components/container/Container\";\n\nconst countOfPictures = 25;\n\nconst initializeAssistant = (getState/*: any*/) => {\n    if (process.env.NODE_ENV === \"development\") {\n        return createSmartappDebugger({\n            token: \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZTFmNTQxODM0NzEwNjkyNzAzM2QwYTQ0ODFmMTNkNTJiMTA1N2NhMWNkY2I0OTg0ZGNiMWQxZjQzMzdhMzYyNTM5YmU5MjcwMDQyNjI5OCIsImF1ZCI6IlZQUyIsImV4cCI6MTYyMzAxMDc1MSwiaWF0IjoxNjIyOTI0MzQxLCJpc3MiOiJLRVlNQVNURVIiLCJ0eXBlIjoiQmVhcmVyIiwianRpIjoiYjM4ZjEyM2YtY2QwNi00YzZmLWFjM2EtNDMxODcyNjlhOTdkIiwic2lkIjoiZjk5YzlkMTMtNjNhZi00ZTBhLWEyNjYtMTg2YTQ3NGQwYTRkIn0.oJrloeI49IiijcWNHycouraesKXfZ3nUqZEnSmvyFz4dJ-RzEb8oTbPDJbNcaxQRlK85--0h56SkmggSpceGGP3X5uWL-zmdNmoXkaVP50SI58YhfM07Ma1cU4-qV0SATwdVemtwrvX8yDH0inqlGXOoI49EissB3Ma2Q4gK65nDiStAspF2bZTk0705M_skE_OYs2ZZ2HwsPW4I7jHzDr1WQGai5eBgvrsade73zMJrWPhpxZY1rRXWQYxLM2v0fG3YmGdW4ONElN71iMlXothH8rBSWvbW3OTlE7zjcxr6OqhGobGfNdVS_23RTIhp0CRMje3L-9I0KisUjL7uNlX7-IImhvR0gaPamInKQVRzzlvd2A7LDnyVZ6zqpHsCZ7dJrzX-kLElAKAjrkCadFeNhyL5NdYTub3SvDSrMA_5BvP9mlfqkfc0K1XBrA5Y4AjW_2JKT0LSaPu5L00VEK_qdZ98LE8x__Kzy1n19LyZ-ThhkpZJ8nJu80_Q60yHzwWfzXQ_YX-zGRuCW5ow668m8wPi2nb1GI70BXiUVTSjXfbMH2BMWzKYUnHJU0INF-KOc4o6u-Ib5YLKaERl9WClIkclINGSOoVtvgc3vi3Q0jtPr0Ko0YtrZpUY-w9cQigA-hSQ83b4q4RTzxtetoTUWNQ_4EiOTph-6SfDwpE\" ?? \"\",\n            initPhrase: 'Запусти тренажер памяти',\n            getState,\n        });\n    }\n    return createAssistant({ getState });\n};\n\nexport {initializeAssistant};\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        this.assistant = initializeAssistant(() => this.getStateForAssistant() );\n        this.assistant.on(\"data\", (event/*: any*/) => {\n            console.log(`assistant.on(data)`, event);\n            const { action } = event\n            this.dispatchAssistantAction(action);\n        });\n        this.assistant.on(\"start\", (event) => {\n            console.log(`assistant.on(start)`, event);\n        });\n        this.state = {\n            cards: [],\n            flag: 0,\n            status: 'start',\n            level: 0,\n            changeFlag(value) {\n                this.setState(this.state = {flag: this.state.flag + value})\n            },\n            startGame(level) {\n                function random(from, till) {\n                    return (Math.floor(Math.random() * (till - from)) + from);\n                }\n                function changeFlag(value) {\n                    this.setState(this.state = {flag: this.state.flag + value})\n                }\n                let countOfAnswers = random(4, 7);\n                let answer = random(0, countOfPictures);\n                console.log(answer);\n                console.log(countOfAnswers);\n                let answersIndexes = new Set();\n                let used = new Set([answer]);\n                let cards = [];\n\n                for (let i = 0; i < countOfAnswers; i++) {\n                    while(true) {\n                        let ind = random(0, level);\n                        if (!answersIndexes.has(ind)) {\n                            answersIndexes.add(ind);\n                            break;\n                        }\n                    }\n                }\n                this.setState(this.state = {status: \"current\", flag: level - countOfAnswers, level: level, changeFlag: changeFlag});\n                for (let i = 0; i < level; i++) {\n                    let isAnswer = 'wrong';\n                    let value = 0;\n                    if (countOfAnswers !== 0 && answersIndexes.has(i)) {\n                        {\n                            countOfAnswers--;\n                            isAnswer = 'truth';\n                            value = answer;\n                        }\n                    }\n                    else {\n                        while (true) {\n                            value = random(0, countOfPictures);\n                            if (!used.has(value)) {\n                                used.add(value);\n                                break;\n                            }\n                        }\n                    }\n                    this[\"c\" + i] = React.createRef();\n                    cards.push(<Card src={\"https://pictures-for-memory-game.s3.eu-north-1.amazonaws.com/\" + (value + 1) + \".jpg\"} index={i + 1} status={\"open\"} answer={isAnswer} level={'level_' + level} changeParentFlag={changeFlag.bind(this)} key={i} time={true} ref={this['c' + i]} />)\n\n                }\n                this.setState(this.state = {cards: cards});\n            },\n            finishGame() {\n                for (let i = 0; i < this.state.level; i++) {\n                    this['c' + i].current.makeResult();\n                }\n                this.resultRef.current.makeResult(this.state.flag, this.state.level);\n                this.setState(this.state = {status: \"finish\"});\n            },\n            restartGame() {\n                this.setState(this.state = {status: \"start\"})\n            }\n        }\n    }\n    resultRef = React.createRef();\n    getStateForAssistant () {\n        console.log('getStateForAssistant: this.state:', this.state)\n        const state = {};\n        return state;\n    }\n    dispatchAssistantAction (action) {\n        console.log('dispatchAssistantAction', action);\n        if (action) {\n            switch (action.type) {\n                case \"easy_level\":\n                    if (this.state.status === \"start\") {\n                        this.state.startGame.call(this, 9);\n                    }\n                    return;\n                case \"middle_level\":\n                    if (this.state.status === \"start\") {\n                        this.state.startGame.call(this, 16);\n                    }\n                    return;\n                case \"hard_level\":\n                    if (this.state.status === \"start\") {\n                        this.state.startGame.call(this, 25);\n                    }\n                    return;\n                case \"return_back\":\n                    if (this.state.status === \"finish\") {\n                        this.state.restartGame.call(this);\n                    }\n                    return;\n                case \"check_answers\":\n                    if (this.state.status === \"current\") {\n                        this.state.finishGame.call(this);\n                    }\n                case \"choose_num\":\n                    if(this.state.status === \"current\")\n                    this['c' + (action.num - 1)].current.check();\n                    return;\n            }\n        }\n    }\n    render() {\n        if (this.state.status === \"start\") {\n            return <div className={\"start_page\"}>\n                <Container>\n                    <Level num={1} name={\"легкий уровень\"}/>\n                    <Level num={2} name={\"средний уровень\"}/>\n                    <Level num={3} name={\"сложный уровень\"}/>\n                </Container>\n            </div>\n        } else if (this.state.status === \"current\" || this.state.status === \"finish\") {\n            return <Fragment>\n                <Timer/>\n                <Table>{this.state.cards}</Table>\n                <Result ref={this.resultRef}></Result>\n            </Fragment>\n        }\n    }\n}\n\nexport default App\n\n"]},"metadata":{},"sourceType":"module"}